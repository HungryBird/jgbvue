"use strict";new Vue({el:"#app",data:{treeData:null,defaultProps:{children:"children",label:"label"},searchInputVal:"",tableData:[],selectedRows:[],addForm:{visible:!1,checked:!0,addFormData:{number:"",name:"",level:1,notes:""},rules:{number:[{required:!0,message:"请输入编号"}],name:[{required:!0,message:"请输入名称"}],level:[{required:!0,message:"请输入级别"}],notes:[{}]}},editForm:{visible:!1,checked:!0,editFormData:{number:"",name:"",level:1,notes:""},rules:{number:[{required:!0,message:"请输入编号"}],name:[{required:!0,message:"请输入名称"}],level:[{required:!0,message:"请输入级别"}],notes:[{}]}}},mounted:function(){var e=this;axios.get("/administrativeRegion/data_get").then(function(t){var s=JSON.parse(t.data.cities);s.forEach(function(t){var s={};for(key in t)"children"!=key&&(s[key]=t[key]);e.tableData.push(s)}),e.treeData=s}).catch(function(e){console.log("err",e)})},methods:{handleNodeClick:function(e,t,s){var a=this;e.children?(this.tableData.splice(0,this.tableData.length),e.children.forEach(function(e){var t={};for(key in e)"children"!=key&&(t[key]=e[key]);a.tableData.push(t)}),a.addForm.addFormData.level=e.children[0].level):a.addForm.addFormData.level=e.level},rowClick:function(e,t,s){var a=this;this.$refs.multipleTable.toggleRowSelection(e),-1==a.selectedRows.indexOf(e)?a.selectedRows.push(e):a.selectedRows.splice(a.selectedRows.indexOf(e),1)},selectAll:function(e){var t=this;0==e.length?t.selectedRows.splice(0,t.selectedRows.length):(t.selectedRows.splice(0,t.selectedRows.length),e.forEach(function(e){t.selectedRows.push(e)}))},addRegin:function(){this.addForm.visible=!0},onSubmitAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(console.log("valid",e),!e)return!1;axios.post("/administrativeRegion/data_write",t.addForm.addFormData).then(function(e){e.data.status?(t.addForm.checked&&(t.addForm.visible=!1),t.$message({message:e.data.message,type:"success"})):t.$message({message:e.data.message,type:"error"})}).catch(function(e){t.$message({message:req.data.message,type:"error"})})})},editRegin:function(){_self=this,_self.editForm.visible=!0,console.log("rows",_self.selectedRows[0]),_self.editForm.editFormData.name=_self.selectedRows[0].label,_self.editForm.editFormData.level=_self.selectedRows[0].level,_self.editForm.editFormData.number=_self.selectedRows[0].number,_self.editForm.editFormData.notes=_self.selectedRows[0].notes},onSubmitEdit:function(){var e=this;axios.post("/administrativeRegion/data_edit",e.editForm.editFormData).then(function(t){t.data.status?(e.editForm.checked&&(e.editForm.visible=!1),e.$message({type:"success",message:t.data.message})):e.$message({type:"error",message:t.data.message})})},deleteRegin:function(){var e=this;this.$confirm("确定删除行政区域?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(e,t,s){s(e)}}).then(function(t){var s=e;"confirm"==t?axios.post("/administrativeRegion/data_delete",s.selectedRows).then(function(e){e.data.status&&s.$message({type:"success",message:e.data.message})}).catch(function(e){console.log(e)}):"cancel"==t&&e.$message({type:"info",message:"已取消"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}});