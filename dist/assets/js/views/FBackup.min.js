"use strict";new Vue({el:"#app",data:{table:null,uploadDialog:{visible:!1,fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}]},timingDialog:{visible:!1}},mounted:function(){var e=this;axios.get("/FBackup/get_table_data").then(function(t){e.table=JSON.parse(t.data.message)}).catch(function(e){console.log("err:",e)})},methods:{start:function(){var e=this,t=this;this.$confirm("为保证备份数据的完整性，请确保帐套里的其他用户已经退出系统。确认执行备份？","开始备份",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){axios.get("/FBackup/backup").then(function(e){e.data.status?(t.$message({type:"success",message:e.data.message}),done()):done(!1)})}).catch(function(){e.$message({type:"info",message:"已取消"})})},upload:function(){this.uploadDialog.visible=!0},handleSuccess:function(e,t,a){var i=this;e.status?(i.$message.success(e.message),i.uploadDialog.fileList.splice(0,i.uploadDialog.fileList.length),i.uploadDialog.visible=!1):i.$message.error(e.message)},submitUpload:function(){this.$refs.upload.submit()},recover:function(){},download:function(){},deleteData:function(){},timing:function(){this.timingDialog.visible=!0,axios.get("/FBackup/getTiming").then(function(e){console.log("get data",e.data)})},submitTiming:function(){var e=this,t={};t.checked=this.timingDialog.checked,t.time=this.timingDialog.time,axios.post("/FBackup/setTiming",t).then(function(t){t.data.status&&(e.$message({type:"success",message:t.data.message}),e.timingDialog.visible=!1)}).catch(function(t){e.$message.error(t)})},rowClick:rowClick},filters:{parseDate:function(e){var t=new Date(1e3*e);return month=t.getMonth()+1,day=t.getDate(),year=t.getFullYear(),day.length<10&&(day="0"+day),month.length<10&&(month="0"+month),year+"-"+month+"-"+day},parseSize:function(e){return e/1024+"KB"}}});