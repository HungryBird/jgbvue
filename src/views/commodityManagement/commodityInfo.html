<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>商品管理</title>
	<link rel="stylesheet" href="../../element-ui-2.0.11/lib/theme-chalk/index.css">
	<link rel="stylesheet" type="text/css" href="../../assets/css/common/common.css">
</head>
<body>
<div id="app" v-cloak>
	<el-container>
		<el-header style="padding: 0;">
			<el-form :inline="true">
				<el-form-item>
					<el-input placeholder="输入查询条件" v-model="search.input">
						<template slot="append">
							<el-button v-on:click="searchData(search.input)">搜索</el-button>
						</template>
					</el-input>
				</el-form-item>
				<el-form-item>
					<el-checkbox label="显示禁用商品" v-model="isShowForbiddenCommodity" v-on:change="toggleForbiddenCommdity"></el-checkbox>
				</el-form-item>
			</el-form>
		</el-header>
		<el-container>
			<el-aside width="200px" class="jgb-wrap">
				<div class="jgb-title">
					<h5 class="text-center">快速查询</h5>
				</div>
				<ul class="ul-list">
					<li v-for="(item, index) in queryType" :key="item.value" :value="item.value" v-on:click="changeQueryType(item, index)" :class="{active: index === activeIndex}">
						{{ item.label }}
					</li>
				</ul>
			</el-aside>
			<el-main>
				<div class="jgb-wrap">
					<nav class="jgb-nav">
						<el-button class="pull-left">
							列设置
						</el-button>
						<el-button-group class="pull-right">
							<el-button icon="el-icon-plus" v-on:click="addVisible = true">新增</el-button>
							<el-button icon="el-icon-minus" :disabled="selectedRows.length === 0" v-on:click="remove">删除</el-button>
							<el-button :disabled="selectedRows.length === 0" v-on:click="forbidden">禁用</el-button>
							<el-button :disabled="selectedRows.length === 0" v-on:click="startUsing">启用</el-button>
							<el-button v-on:click="importVisible = true">导入</el-button>
							<el-button v-on:click="exportCilck">导出</el-button>
						</el-button-group>
					</nav>
					<el-table :data="table" ref="table" border v-on:row-click="rowClick" :data="cyTable" v-on:select-all="selectAll" v-on:select="selectItem" :row-class-name="rowStatusClassName" v-loading="loadingDetailInfo">
						<el-table-column type="selection"></el-table-column>
						<el-table-column type="index" label="序号" width="50px"></el-table-column>
						<el-table-column label="操作">
							<template slot-scope="scope">
								<el-button-group>
									<el-button size="mini" v-on:click="handleExamine(scope.$index, scope.row)" type="primary">查看</el-button>
									<el-button size="mini" v-on:click="handleEdit(scope.$index, scope.row)">编辑</el-button>
									<el-button size="mini" type="danger" v-on:click="handleDelete(scope.$index, scope.row)">删除</el-button>
								</el-button-group>
							</template>
						</el-table-column>
						<el-table-column label="图片" prop="img" align="center">
							<template slot-scope="scope">
								<i class="el-icon-picture jgb-table-icon" v-on:click="viewImage(scope.row.img, scope.row)"></i>
							</template>
						</el-table-column>
						<el-table-column label="商品编号" prop="commodityNumber" sortable></el-table-column>
						<el-table-column label="商品名称" prop="commodityName" sortable></el-table-column>
						<el-table-column label="商品标签" prop="commodityTag"></el-table-column>
						<el-table-column label="辅助属性" prop="auxiliaryAttributes"></el-table-column>
						<el-table-column label="商品类别" prop="commodityCategory"></el-table-column>
						<el-table-column label="规格型号" prop="specifications"></el-table-column>
						<el-table-column label="商品品牌" prop="commodityBrand"></el-table-column>
						<el-table-column label="单位" prop="unit"></el-table-column>
						<el-table-column label="当前库存" prop="currentRepertory"></el-table-column>
						<el-table-column label="期初数量" prop="initQuantity"></el-table-column>
						<el-table-column label="单位成本" prop="unitCost">
						</el-table-column>
						<el-table-column label="期初总价" prop="initTotal"></el-table-column>
						<el-table-column label="预计采购价" prop="expectPurchasePrice"></el-table-column>
						<el-table-column label="零售价" prop="retailPrice"></el-table-column>
						<el-table-column label="批发价" prop="tradePrice"></el-table-column>
						<el-table-column label="最低价" prop="minPrince"></el-table-column>
						<el-table-column label="最高价" prop="maxPrince"></el-table-column>
						<el-table-column label="备注" prop="remark"></el-table-column>
						<el-table-column label="状态" prop="status">
							<template slot-scope="scope">
								<el-button-group>
									<el-switch v-model="scope.row.status" v-on:change="handleStatus(scope.$index, scope.row)"></el-switch>
								</el-button-group>
							</template>
						</el-table-column>
						<el-table-column label="是否常用" prop="isCommonUse" align="center" sortable>
							<template slot-scope="scope">
								<i :class="{'el-icon-star-on': scope.row.isCommonUse, 'el-icon-star-off': !scope.row.isCommonUse}" class="jgb-table-icon" style="color: #FFD700;" v-on:click="toggleCommonUse(scope.row)"></i>
							</template>
						</el-table-column>
					</el-table>
				</div>
			</el-main>
		</el-container>
	</el-container>
	<transition name="slide-fade">
		<div class="details-wrap" v-show="isUnfold">
			<div class="details-inner" v-loading="loadingDetailInfo">
				<el-row class="row-border">
					<div class="title text-center">
						<h3>商品信息详情页</h3>
					</div>
					<el-col v-for="item in commodityInfo" :span="item.oneRow ? 24 : 12" class="text-center" :key="item.name">
						<div>{{ item.name }}</div>
						<div v-if="item.isImages" v-on:click="viewImage(item)"><i class="el-icon-picture"></i></div>
						<div v-else>{{ item.value }}</div>
					</el-col>
				</el-row>
				<div class="toggle-button-wrap" v-on:click="toggleInfo">
					<span class="jgbvue_arrow_icon" style="background: transparent url(../../assets/img/common/ats-icon_5.png) no-repeat scroll -9px -85px;position: absolute;top: 50%;right: 0;transform: translateY(-50%);"></span>
					<span class="jgbvue_arrow_line" style="background: transparent url(../../assets/img/common/ats-icon_5.png) no-repeat scroll -123px -2px;margin-left: 16px;"></span>
				</div>
			</div>
		</div>
	</transition>
	<transition name="fade">
		<div class="slideshow-wrap" v-if="showSlideshow">
			<div class="slideshow-mask" v-on:click="showSlideshow = false"></div>
			<div class="slideshow-inner">
				<div class="slideshow-inner-nav">
					<a class="index-text">{{ currentImgIndex+1 + '/' +  slideshowArr.length}}</a>
					<i class="el-icon-close" v-on:click="showSlideshow = false"></i>
				</div>
				<div class="slideshow-inner-wrap" :style="{width: currentImgWidth + 'px', height: currentImgHeight + 'px'}">
					<!-- <img v-for="(item, index) in slideshowArr" :src="item.src" :style="{width:item.width+'px',height:item.height+'px', display: currentImgIndex === index ? 'block' : 'none'}"></img> -->
					<img :src="currentImgSrc" :style="{width:currentImgWidth+'px',height:currentImgHeight+'px'}"/>
					<i class="el-icon-arrow-right arrow-right arrow"  v-on:click="nextImg"></i>
					<i class="el-icon-arrow-left arrow-left arrow" v-on:click="prevImg"></i>
				</div>
			</div>
		</div>
	</transition>
</div>
</body>
<script type="text/javascript" src="../../vue/vue.js"></script>
<script type="text/javascript" src="../../axios/axios.min.js"></script>
<script type="text/javascript" src="../../element-ui-2.0.11/lib/index.js"></script>
<script type="text/javascript" src="../../assets/js/common.js"></script>
<script type="text/javascript" src="../../assets/js/views/commodityManagement/commodityInfo.js"></script>
<script type="text/javascript">
	/**
	 * 查询接口
	 * 获取快速查询选项接口
	 * 
	 */
	JGBVue.module.commodityInfo().init('/commodityInfo/search', '/commodityInfo/getQuickQuery', '/common/switch', '/common/data_delete', '/commodityInfo/examine', '/common/get_provinces', '/common/get_cities', '/common/get_district', '/common/get_block', '/common/getCompany', '/common/getDepartment', '/roleManagement/department_member_get', '/common/data_add_save', '/clientInfo/edit_data_get', '/common/data_edit_save', '/common/upload_info', '/clientInfo/exportForm', '/commodityInfo/toggleCommonUse', '/common/slideshow');
</script>
</html>