<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>审核流程</title>
    <link rel="stylesheet" type="text/css" href="../../font-awesome-4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="../../element-ui-2.0.11/lib/theme-chalk/index.css">
    <link rel="stylesheet" type="text/css" href="../../assets/css/common/common.css">
</head>
<body>
	<div id="app" v-cloak>
		<div class="wrap_main">
			<nav>
				<el-button-group class="pull-right">
					<el-button type="primary" v-on:click="add" icon="el-icon-plus">新增</el-button>
					<el-button type="primary" v-on:click="edit" icon="el-icon-edit" :disabled="selectedRows.length != 1">修改</el-button>
					<el-button type="primary" v-on:click="remove" icon="el-icon-delete" :disabled="selectedRows.length == 0">删除</el-button>
				</el-button-group>
			</nav>
			<div class="inner_main">
				<el-table :data="data.table" border :span-method="objectSpanMethod" v-on:row-click="rowClick" ref="auditTable">
					<el-table-column type="selection"></el-table-column>
					<el-table-column type="index" label="序号" width="50"></el-table-column>
					<el-table-column label="系统模块" width="100" prop="sysModule"></el-table-column>
					<el-table-column label="流程级数" width="100" prop="processRank"></el-table-column>
					<el-table-column label="审核人员" width="400" prop="auditor">
						<template slot-scope="scope">
							{{ scope.row.auditor | auditorFilter }}
						</template>
					</el-table-column>
					<el-table-column label="提醒方式" width="400" prop="remarkWay">
						<template slot-scope="scope">
							{{ scope.row.remarkWay | auditorFilter }}
						</template>
					</el-table-column>
					<el-table-column style="pointer-events: none;"></el-table-column>
				</el-table>
				<div class="inner_footer">
					<el-pagination class="pull-right" v-on:size-change="handleSizeChange" v-on:current-change="handleCurrentChange" :current-page="data.pageIndex" :page-sizes="[100, 200, 300, 400]" :page-size="data.pageSize" layout="total, sizes, prev, pager, next, jumper" :total="data.total"></el-pagination>
				</div>
			</div>
		</div>
		<!-- 新增窗口 -->
		<el-dialog :visible.sync="dialogFormVisible">
			<div slot="title" class="title">
				新增审核流程
			</div>
			<el-form>
				<h3>
					①系统模块
				</h3>
				<el-form-item label="选择系统模块">
					<el-select v-model="form.selectSysModule" v-on:change="changeModule">
						<el-option v-for="option in data.sysModuleOptions" :label="option.label" :value="option.value" :key="option.value"></el-option>
					</el-select>
					<label class="red" v-if="form.selectSysModule == '选项1' || form.selectSysModule == '选项2'">
						<el-checkbox name="type" class="checkbox" v-model="form.checked"></el-checkbox>
						<b>商品销售价低于最低价时需要老板审核</b>
					</label>
				</el-form-item>
				<h3>
					②流程级数
				</h3>
				<el-form-item label="选择流程级数">
					<el-select v-on:change="changeLevel" v-model="levelSelected">
						<el-option v-for="option in data.processLevelOptions" :label="option.label" :value="option.value" :key="option.value"></el-option>
					</el-select>
				</el-form-item>
				<h3>
					③审核人员
				</h3>
				<el-form-item>
					<ul class="selectAuditorsLi">
						<li v-if="selectProcessLevel > 0">
							<label>选择一级审核人员</label>
							<el-select multiple placeholder="请选择" v-model="form.firstLevelAuditorsGroup" width="100%">
								<el-option v-for="item in data.auditors.concat(data.bosses)" :key="item.value" :label="item.name" :value="item.value"></el-option>
							</el-select>
						</li>
						<li v-if="selectProcessLevel == 2">
							<label>选择二级审核人员</label>
							<el-select multiple placeholder="请选择" v-model="form.secondLevelAuditorsGroup" width="100%">
								<el-option v-for="item in data.auditors.concat(data.bosses)" :key="item.value" :label="item.name" :value="item.value"></el-option>
							</el-select>
						</li>
						<li v-if="!bossesSelected">
							<label>选择老板</label>
							<el-select multiple placeholder="请选择" v-model="form.bosses" width="100%">
								<el-option v-for="item in data.bosses" :key="item.value" :label="item.name" :value="item.value"></el-option>
							</el-select>
						</li>
					</ul>
				</el-form-item>
				<h3>
					④多人审核方式
				</h3>
				<el-form-item>
					<el-radio v-model="form.auditWay" label="1">只要有一个通过审核即可向下流转</el-radio>
					<el-radio v-model="form.auditWay" label="2">只有全部人员通过审核才可向下流转</el-radio>
				</el-form-item>
				<h3>
					⑤多人审核方式
				</h3>
				<el-form-item>
					<el-checkbox-group v-model="form.multiplayerAuditMethod">
						<el-checkbox label="站内信息" name="type"></el-checkbox>
						<el-checkbox label="手机信息" name="type"></el-checkbox>
						<el-checkbox label="邮件信息" name="type"></el-checkbox>
					</el-checkbox-group>
				</el-form-item>
			</el-form>
			<div slot="footer">
				<el-button type="primary" v-on:click="saveAdd">保存</el-button>
				<el-button v-on:click="dialogFormVisible = false">关闭</el-button>
			</div>
		</el-dialog>
	</div>
</body>
<script type="text/javascript" src="../../vue/vue.js"></script>
<script type="text/javascript" src="../../element-ui-2.0.11/lib/index.js"></script>
<script type="text/javascript" src="../../axios/axios.min.js"></script>
<script type="text/javascript" src="../../assets/js/views/systemSettings/auditProcess.js"></script>
</html>