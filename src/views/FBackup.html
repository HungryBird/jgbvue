<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>备份与恢复</title>
	<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	<!-- <link rel="stylesheet" type="text/css" href="../assets/css/views/FBackup.css"> -->
	<style type="text/css">
		[v-cloak] {
			display: none;
		}
	</style>
</head>
<body>
	<div id="app" v-cloak>
		<el-row>
			<el-col :span="24" style="padding: 10px;">
				<el-button-group>
					<el-button type="primary" @click="start">开始备份</el-button>
					<el-button type="primary" @click="upload">上传本地备份</el-button>
				</el-button-group>
			</el-col>
		</el-row>
		<el-button-group style="padding: 0 10px 10px 10px;">
			<el-button v-on:click="recover">恢复</el-button>
			<el-button v-on:click="download">下载</el-button>
			<el-button v-on:click="deleteData">删除</el-button>
		</el-button-group>
		<el-table border :data="table" ref="BFtable">
			<el-table-column type="selection"></el-table-column>
			<el-table-column type="index"></el-table-column>
			<el-table-column label="备份名称" prop="name"></el-table-column>
			<el-table-column label="时间" prop="date">
				<template slot-scope="scope">
					{{ scope.row.date | parseDate }}
				</template>
			</el-table-column>
			<el-table-column label="文件大小" prop="">
				<template slot-scope="scope">
					{{ scope.row.size | parseSize }}
				</template>
			</el-table-column>
		</el-table>
		<el-dialog title="上传本地备份" :visible.sync="uploadDialog.visible">
			<el-upload action="/FBackup/backup" :on-success="handleSuccess" :file-list="uploadDialog.fileList" ref="upload" :auto-upload="false">
				<el-button slot="trigger" size="small" type="primary">选取文件</el-button>
				<el-button style="margin-left: 10px;" size="small" type="success" @click="submitUpload">上传到服务器</el-button>
			</el-upload>
		</el-dialog>
	</div>
</body>
<script type="text/javascript" src="../assets/js/common/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script type="text/javascript" src="../assets/js/views/FBackup.js"></script>
</html>